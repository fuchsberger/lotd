<div class='container'>
  <table class='table table-sm' phx-hook="ItemTable">
    <thead>
      <tr>
        <%= unless is_nil(@user), do: th_toggle() %>
        <%= th_sort title("Item", @user, @data.total_entries), LotdWeb.GalleryLive, "name", @sort, @dir %>
        <%= th_sort "Display", LotdWeb.GalleryLive, "display", @sort, @dir  %>
        <%= th_sort "Room", LotdWeb.GalleryLive, "room", @sort, @dir  %>
      </tr>
    </thead>
    <tbody>
      <%= for item <- @data.entries do %>
        <tr>
          <%= unless is_nil(@user) do %>
            <td class='text-center'>
              <a phx-click='toggle_collected' phx-value-id='<%= item.id %>'>
                <i class='<%= icon_active(@user.active_character.items, item.id) %>'></i>
              </a>
            </td>
          <% end %>
          <td class='font-weight-bold'><%= item.name %></td>
          <td><%= item.display %></td>
          <td><%= item.room %></td>
        </tr>
      <% end %>
      <%= if @user && Enum.count(@user.active_character.mods) == 0 do %>
        <tr>
          <td colspan="4" class='text-center'>
            <strong>Please select the mods for your playthrough first.</strong>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= if Enum.count(@data.entries) < @data.total_entries do %>
    <button id='more' class='d-none' phx-click='load_more'>Load more...</button>
  <% end %>
</div>
