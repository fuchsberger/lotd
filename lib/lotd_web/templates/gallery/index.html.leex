<%# Gallery Menu %>
<ul class="nav nav-tabs justify-content-center mb-2">
  <%= gallery_tab(@room, 1, "Hall of Heroes") %>
  <%= gallery_tab(@room, 2, "Armory") %>
  <%= gallery_tab(@room, 3, "Library") %>
  <%= gallery_tab(@room, 4, "East Exhibits") %>
  <%= gallery_tab(@room, 5, "Dragonborn Hall") %>
  <%= gallery_tab(@room, 6, "Natural Science") %>
  <%= gallery_tab(@room, nil, "Other") %>
</ul>

<div class='d-flex flex-grow-1 row h-100'>
  <div id='display-list' class="col col-md-5">
    <form phx-change='search'>
      <div class='form-group'>
        <%= text_input :search_field, :query,
          autofocus: true,
          class: "form-control",
          placeholder: "Search...",
          phx_debounce: 300,
          type: "search"
        %>
      </div>
    </form>

    <div class="list-group list-group-flush mh-100 overflow-auto">

      <button class="<%= display_class(@display, nil) %>" phx-click="show-display">
        <strong>All Displays</strong>
        <span class="badge badge-secondary badge-pill"><%= Enum.count(@items) %></span>
      </button>

      <%= for d <- @visible_displays do %>
        <button
          class="<%= display_class(d, @display) %>"
          phx-click="show-display"
          phx-value-id="<%= d.id %>"
        >
          <%= d.name %>
          <span class="badge badge-secondary badge-pill"><%= d.count %></span>
        </button>
      <% end %>
      <%= if @authenticated? do %>
        <div class='list-group-item form-group form-check'>
          <p class='mb-0'><a class='text-primary' phx-click='toggle-hide-collected'>
            <i class="<%= active?(@hide_collected) %>"></i>
            Hide collected items
            </a></p>
          <small class='text-secondary'>
            <span class="badge badge-secondary badge-pill">X</span>
            <%= hide_collected_legend(@hide_collected) %>
          </small>
        </div>
      <% end %>
    </div>
  </div>
  <div id='item-list' class="col col-md-7 mh-100 overflow-auto">
    <ul class="list-group list-group-flush">
      <%= for item <- @visible_items do %>
        <li class="<%= item_class(item, @display, @user, @hide_collected) %>">
          <%= item.name %>
          <%= if @authenticated? do %>
            <a class='text-primary' phx-click='toggle-item' phx-value-id='<%= item.id %>'>
              <i class='<%= collected?(item, @user) %>' ></i>
            </a>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
</div>
